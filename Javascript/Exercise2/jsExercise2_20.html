<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Exercise 2_19</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>

    <div class="container d-flex justify-content-center align-items-center mt-5">
        <input type="text" class="form-control mx-1" id="hobby" placeholder="Enter hobby">
        <button type="submit" class="btn btn-primary mx-1" id="filter" onclick="filterUser()">FILTER</button>
        <button type="submit" class="btn btn-primary mx-1" id="filterALL" onclick="filterUserALL()">SHOW </button>
    </div>
    <div id="mainDiv" class="container mt-5"></div>

    <script>

        let hobby = document.getElementById('hobby');
        let userArr = [
            {
                id : 1,
                name: 'abc',
                hobbies: ['reading', 'traveling', 'music']
            },
            {
                id : 2,
                name: 'def',
                hobbies: ['reading', 'traveling', 'dance']
            },
            {
                id : 3,
                name: 'ghi',
                hobbies: ['reading', 'dance', 'music']
            },
            {
                id : 4,
                name: 'jkl',
                hobbies: ['dance', 'traveling', 'music']
            },
            {
                id : 5,
                name: 'mno',
                hobbies: ['reading', 'traveling', 'acting']
            },
            {
                id : 6,
                name: 'pqr',
                hobbies: ['reading', 'acting', 'music']
            },
            {
                id : 7,
                name: 'stu',
                hobbies: ['acting', 'traveling', 'music']
            },
            {
                id : 8,
                name: 'vwx',
                hobbies: ['reading', 'dance', 'acting']
            },
            {
                id : 9,
                name: 'yza',
                hobbies: ['dance', 'acting', 'music']
            },
            {
                id : 10,
                name: 'bcd',
                hobbies: ['acting', 'traveling', 'dance']
            }
        ];


        let filterUsers = (hobby) =>{
            const filteredhobby = userArr.filter((userHobby) => {
                return userHobby.hobbies.includes(hobby) === true;
            });
            return filteredhobby;
        }
   

        function createResultArr(hobby) {
            let resultArr = [];
            let tempHobbyArr = filterUsers(hobby);
            tempHobbyArr.forEach(user => {
                resultArr.push(user.name);
            });
            return resultArr;
        } 

        let hobbyGroup = () => {
            let tempArr = [];
            tempArr.concat(userArr[0].hobbies);

            for (const user of userArr) {
                tempArr = tempArr.concat(user.hobbies);
            }
            let hobbySet = new Set(tempArr);
            return Array.from(hobbySet);
            
        }

        let filterUser = () => {
            let div = document.getElementById('mainDiv');
            let result=hobby.value +": ["+ createResultArr(hobby.value) + "]";
            div.innerHTML = result;
            console.log(result);
        }

        let filterUserALL = () =>{
            let div = document.getElementById('mainDiv');
            let allHobbies = hobbyGroup();
            div.innerHTML = '';

            for (const hobby of allHobbies) {
                let result = hobby +": ["+ createResultArr(hobby) + "]";
                let para = document.createElement('p');
                para.innerHTML = result;
                div.appendChild(para);
            }
        }


    </script>
    
</body>
</html>